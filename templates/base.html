{% extends "layout.html" %}

{% block sidebar %}
<div x-data="{ open: false, darkMode: localStorage.getItem('theme') === 'dark' }" x-init="$watch('darkMode', val => localStorage.setItem('theme', val ? 'dark' : 'light'))" class="md:hidden p-4 flex justify-between items-center">
    <button @click="open = !open" class="text-gray-700 hover:text-blue-600 focus:outline-none">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16" />
        </svg>
    </button>
    <button @click="darkMode = !darkMode" class="text-gray-700 hover:text-yellow-500 focus:outline-none">
        <svg x-show="!darkMode" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m8.485-8.485h1M3.515 12.515h1m15.364 4.95l.707-.707M4.222 5.636l.707-.707m12.021-.707l-.707.707M5.636 19.778l-.707.707M12 5a7 7 0 100 14 7 7 0 000-14z" />
        </svg>
        <svg x-show="darkMode" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" />
        </svg>
    </button>
</div>

<aside :class="{'block': open, 'hidden': !open}" class="w-full md:w-64 bg-white dark:bg-gray-900 shadow-md fixed md:static inset-y-0 z-30 md:z-0 overflow-y-auto hidden md:block">
    <div class="p-4 flex flex-col h-full">
        <h2 class="text-lg font-bold text-gray-800 dark:text-gray-100 mb-4">📘 Budget Tracker</h2>
        <nav class="space-y-2 flex-1">
            <div x-data="{ expanded: true }">
                <button @click="expanded = !expanded" class="w-full text-left text-gray-600 dark:text-gray-300 font-semibold text-xs uppercase tracking-wide px-3 py-1">Transactions</button>
                <div x-show="expanded" class="space-y-2 mt-1">
                    <a href="/dashboard" class="block py-2 px-3 rounded-lg text-sm font-medium {% if request.path == '/dashboard' %}bg-blue-100 text-blue-700{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-100{% endif %}">🏠 Dashboard</a>
                    <a href="/add-transaction" class="block py-2 px-3 rounded-lg text-sm font-medium {% if request.path == '/add-transaction' %}bg-blue-100 text-blue-700{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-100{% endif %}">➕ Add Transaction</a>
                    <a href="/all-transactions" class="block py-2 px-3 rounded-lg text-sm font-medium {% if request.path == '/all-transactions' %}bg-blue-100 text-blue-700{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-100{% endif %}">📋 All Transactions</a>
                </div>
            </div>

            <div x-data="{ expanded: true }">
                <button @click="expanded = !expanded" class="w-full text-left text-gray-600 dark:text-gray-300 font-semibold text-xs uppercase tracking-wide px-3 py-1 mt-4">Insights</button>
                <div x-show="expanded" class="space-y-2 mt-1">
                    <a href="/analytics" class="block py-2 px-3 rounded-lg text-sm font-medium {% if request.path == '/analytics' %}bg-blue-100 text-blue-700{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-100{% endif %}">📊 Analytics</a>
                </div>
            </div>

            <div x-data="{ expanded: true }">
                <button @click="expanded = !expanded" class="w-full text-left text-gray-600 dark:text-gray-300 font-semibold text-xs uppercase tracking-wide px-3 py-1 mt-4">Setup</button>
                <div x-show="expanded" class="space-y-2 mt-1">
                    <a href="/budget-setup" class="block py-2 px-3 rounded-lg text-sm font-medium {% if request.path == '/budget-setup' %}bg-blue-100 text-blue-700{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-100{% endif %}">🛠️ Budget Setup</a>
                    <a href="/manage-categories" class="block py-2 px-3 rounded-lg text-sm font-medium {% if request.path == '/manage-categories' %}bg-blue-100 text-blue-700{% else %}text-gray-700 dark:text-gray-300 hover:bg-gray-100{% endif %}">🗂️ Categories</a>
                </div>
            </div>
        </nav>
        <div class="mt-6 border-t pt-4 text-xs text-gray-400 dark:text-gray-500">
            <a href="/logout" class="block py-2 px-3 rounded-lg text-sm font-medium text-gray-500 dark:text-gray-400 hover:text-red-600">
                🚪 Log out
            </a>
            <div class="mt-4 px-3">
                Version 1.03<br>
                © Andre Salmon – HPA Labs 2025
            </div>
        </div>
    </div>
</aside>
{% endblock %}
